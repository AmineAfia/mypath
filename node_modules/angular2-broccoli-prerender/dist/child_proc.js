"use strict";
/// <reference path="../typings/main/ambient/node/index.d.ts" />
require('angular2-universal-polyfills');
var angular2_universal_1 = require('angular2-universal');
var fs = require('fs');
var path = require('path');
var args = require('optimist').argv;
var appShellOptions = require(args.optionsPath).options;
var sourceHtml = fs.readFileSync(args.sourceHtml, 'utf-8');
var options = Object.assign(appShellOptions, {
    document: angular2_universal_1.Bootloader.parseDocument(sourceHtml),
});
var bootloader = angular2_universal_1.Bootloader.create(options);
// Make sure to get all providers and platformProviders
var providers = [].concat(options.providers || []).concat(options.platformProviders || []);
bootloader.serializeApplication(null, providers)
    .then(function (html) { return fs.writeFileSync(args.outputIndexPath, html, 'utf-8'); });
//# sourceMappingURL=child_proc.js.map